<?phpclass Cms_Model_Mapper_User{    protected $_dbTable;    public function setDbTable($dbTable)    {        if (is_string($dbTable))         {            $dbTable = new $dbTable();        }        if (!$dbTable instanceof Zend_Db_Table_Abstract)         {            throw new Exception('Invalid table data gateway provided');        }        $this->_dbTable = $dbTable;		        return $this;    }    public function getDbTable()    {        if (null === $this->_dbTable)         {            $this->setDbTable('Cms_Model_DbTable_Users');        }        return $this->_dbTable;    }    // @todo zapis roles	public function save(Cms_Model_User $user)	{		$data = array(			'email'			=> $user->getEmail(),            'name'			=> $user->getName(),			'surname'		=> $user->getSurname(),			'phone'			=> $user->getPhone(),			'job'			=> $user->getJob(),			'photo'			=> $user->getPhoto(),			'description'	=> $user->getDescription()		);		if (null === ($id = $user->getId())) 		{			$data['created'] = date('Y-m-d H:i:s');			$id = $this->getDbTable()->insert( $data );			$user->setId( $id );        } else {			$this->getDbTable()->update( $data, array('id = ?' => $id) );		}	}	// @todo odczyt roles    public function find($id, Cms_Model_User $user)    {        $result = $this->getDbTable()->find($id);        if (0 == count($result))         {            return false;        }        $row = $result->current();        $user->setId( $row->id )        	->setEmail( $row->email )			->setName( $row->name )			->setSurname( $row->surname )			->setPhone( $row->phone )			->setJob( $row->job )			->setPhoto( $row->photo  )			->setDescription( $row->description );		return true;    }    public function fetchAll()    {        $resultSet = $this->getDbTable()->fetchAll();        $entries   = array();        foreach ($resultSet as $row)         {            $entry = new Cms_Model_User();            $entry->setId( $row->id )	        	->setEmail( $row->email )				->setName( $row->name )				->setSurname( $row->surname )				->setPhone( $row->phone )				->setJob( $row->job )				->setPhoto( $row->photo  )				->setDescription( $row->description );            $entries[] = $entry;        }        return $entries;    }}